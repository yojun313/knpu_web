<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PAILAB AI 고소장 생성 서비스</title>
  <link rel="stylesheet" href="/forms/sue_index_style.css" type = "text/css">
</head>

<script language='javascript'>

  var is_submit = true;
  var _NEXT_FOCUS = ""; // 커서가 갈 곳..

  function check_form(){

      f = document.form;

     if(is_submit == true){
        return true;
     }else{
        f[_NEXT_FOCUS].focus();
        is_submit = true;
        return false;
    }
  }

  function next_input(next_focus){
    if(event.keyCode == 13){
         is_submit = false;
        _NEXT_FOCUS = next_focus;
     }
  }

</script>

<body>

  <h1>PAILAB AI 고소장 생성 서비스</h1>

  <form action = "/submit" accept-charset = "utf-8" name = "sue_info" method = "post">

    <div class="container">

      <div class="addinfo_container">
        <fieldset>
          <legend>고소 죄명</legend>
  
          고소 죄명: <select id="option" name="고소 죄명" required></br></br>
            <option value="" disabled selected hidden>선택</option>
            <option value="계약금사기">계약금사기</option>
            <option value="보험사기">보험사기</option>
            <option value="분양사기">분양사기</option>
            <option value="소송사기">소송사기</option>
            <option value="아이템사기">아이템사기</option>
            <option value="인터넷물품사기">인터넷물품사기</option>
            <option value="차용사기">차용사기</option>
            <option value="취업사기">취업사기</option>
          </select></br>
  
        </fieldset>
      </div>

      <div class="requester_container">
        <fieldset>
          <legend>고소인 정보 입력</legend>
    
            고소인 성명: <input type="text" id="고소인" name="고소인" onKeyDown="next_input('고소인 주소');" required> </br></br>
    
            고소인 주민등록번호:
            <input type="text"
                  id="고소인 주민등록번호_display"
                  placeholder="000000-*******"
                  maxlength="14"
                  autocomplete="off"
                  inputmode="numeric"
                  oninput="maskRRN(this, '고소인 주민등록번호_raw')"
                  required>

            <input type="hidden"
                  name="고소인 주민등록번호"
                  id="고소인 주민등록번호_raw">
    
            고소인 주소: <input type="text" id="고소인 주소" name="고소인 주소" onKeyDown="next_input('고소인 직업');" required> </br></br>
    
            고소인 직업: <input type="text" id="고소인 직업" name="고소인 직업" onKeyDown="next_input('고소인 전화');" required> </br></br>
    
            고소인 전화: <input type="text" id="고소인 전화" name="고소인 전화" onKeyDown="next_input('고소인 이메일');" required> </br></br>
    
            고소인 이메일: <input type="text" id="고소인 이메일" name="고소인 이메일" onKeyDown="next_input('피고소인 성명');" required> </br>
        </fieldset>
      </div>
    

      <div class="receiver_container">
        <fieldset>
          <legend>피고소인 정보 입력</legend>
            피고소인 성명: <input type="text" id="피고소인" name="피고소인" onKeyDown="next_input('피고소인 주민등록번호');"> </br></br>
    
            피고소인 주민등록번호:
            <input type="text"
                  id="피고소인 주민등록번호_display"
                  placeholder="000000-*******"
                  maxlength="14"
                  autocomplete="off"
                  inputmode="numeric"
                  oninput="maskRRN(this, '피고소인 주민등록번호_raw')"
                  required>

            <input type="hidden"
                  name="피고소인 주민등록번호"
                  id="피고소인 주민등록번호_raw">
              
            피고소인 주소: <input type="text" id="피고소인 주소" name="피고소인 주소" onKeyDown="next_input('피고소인 직업');"> </br></br>
    
            피고소인 직업: <input type="text" id="피고소인 직업" name="피고소인 직업" onKeyDown="next_input('피고소인 전화');"> </br></br>
    
            피고소인 전화: <input type="text" id="피고소인 전화" name="피고소인 전화" onKeyDown="next_input('피고소인 이메일');"> </br></br>
    
            피고소인 이메일: <input type="text" id="피고소인 이메일" name="피고소인 이메일" onKeyDown="next_input('피고소인과의 관계');"> </br>

        </fieldset> 
      </div>
    

    <div class="addinfo_container">
      <fieldset>
        <legend>추가 정보</legend>
        피고소인과의 관계: <input type="text" id="피고소인과의 관계" name="피고소인과의 관계" onKeyDown="next_input('기타 피고소인을 특정할 수 있는 내용');"> </br></br>
      
        기타 피고소인을 특정할 수 있는 내용: <input type="text" id="기타 피고소인을 특정할 수 있는 내용" name="기타 피고소인을 특정할 수 있는 내용" required> </br>

      </fieldset>
    </div>
  </div>

    <input type='submit' value='다음' onClick='return check_form();'>
  </form>
  

</body>

<script>
  const FORM_KEY = "sue_info";

  // 모든 input / textarea / select 저장
  function saveForm() {
    const data = {};
    document.querySelectorAll("input, textarea, select").forEach(el => {
      if (el.name) {
        data[el.name] = el.value;
      }
    });
    localStorage.setItem(FORM_KEY, JSON.stringify(data));
  }

  // 저장된 데이터 복원
  function loadForm() {
    const saved = localStorage.getItem(FORM_KEY);
    if (!saved) return;

    const data = JSON.parse(saved);
    document.querySelectorAll("input, textarea, select").forEach(el => {
      if (el.name && data[el.name] !== undefined) {
        el.value = data[el.name];
      }
    });
  }

  // 제출 성공 시 임시저장 삭제
  function clearFormStorage() {
    localStorage.removeItem(FORM_KEY);
  }

  // 이벤트 연결
  window.addEventListener("load", loadForm);
  document.addEventListener("input", saveForm);
  
  function maskRRN(input, hiddenId) {
    // 숫자만 추출
    let raw = input.value.replace(/[^0-9]/g, "");
  
    // 최대 13자리 제한
    if (raw.length > 13) raw = raw.slice(0, 13);
  
    // hidden input에 원본 저장
    document.getElementById(hiddenId).value = raw;
  
    // 화면 표시용 값 생성
    let display = "";
  
    if (raw.length <= 6) {
      // 앞자리 입력 중
      display = raw;
    } else {
      // 7자리 이후는 *로 마스킹
      display =
        raw.slice(0, 6) +
        "-" +
        "*".repeat(raw.length - 6);
    }
  
    input.value = display;
  }
</script>


</html> 